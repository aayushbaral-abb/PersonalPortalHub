name: Supabase Keep Alive Ping

# CRON Schedule: Runs every 3 days at midnight UTC.
on:
  schedule:
    # This runs at 00:00 UTC on the 1st, 4th, 7th, 10th... day of the month.
    - cron: '0 0 */3 * *' 
  
  # Allows you to manually trigger the job from the GitHub Actions tab for testing
  workflow_dispatch:

jobs:
  ping_supabase:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Run Supabase Ping Script
        run: node .github/scripts/keep_alive.js
        env:
          # Map the GitHub Secrets to environment variables used by the JavaScript file
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}

          SUPABASE_ANON_KEY: ${{ secrets.SUPABASE_ANON_KEY }}

